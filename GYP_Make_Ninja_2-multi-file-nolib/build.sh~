#!/bin/bash
# build.sh 
# this script does two things:
# 1. run gyp generator command to generate a toy project from C++ source code
#    which just simply prints out the simple "Hello World!!" string
#    the gyp meta-build system can generate projects for most build systems
#    this script choose two build systems, GNU Make and Ninja for demonstration
# 2. build the toy project generated by gyp, and link the executable code files
#    to symbols in root directory of the project
# 
# Author: Chuan Zhang, Jan. 26. 2016
# These code and scripts are to support my tutorial "A Brief Introduction to 
# Build Systems".
# 
gyp hello-gyp.gyp --depth=. -f make --generator-output=build/makefiles
make -C build/makefiles
ln -f -s build/makefiles/out/Default/hello-gyp hello-gyp-make

gyp hello-gyp.gyp --depth=. -f ninja --generator-output=build/ninja
ninja -C build/ninja/out/Default/
ln -f -s build/ninja/out/Default/hello-gyp hello-gyp-ninja

